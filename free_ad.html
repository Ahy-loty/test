<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>إعلان تجريبي مجاني</title>
<style>
  :root{
    --bg:#f5f7fb;
    --card:#fff;
    --accent:#0b76ef;
    --muted:#6b7280;
    --shadow: 0 6px 18px rgba(11,118,239,0.08);
    font-family: "Segoe UI", Roboto, "Noto Naskh Arabic", system-ui, sans-serif;
  }
  body{background:var(--bg); margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:32px; box-sizing:border-box; direction:rtl;}
  .ad-wrap{width:100%; max-width:920px; background:var(--card); border-radius:12px; box-shadow:var(--shadow); overflow:hidden; display:grid; grid-template-columns: 300px 1fr; gap:18px; padding:18px; align-items:center;}
  .media{height:180px; display:flex; align-items:center; justify-content:center; overflow:hidden; border-radius:8px; background:linear-gradient(180deg,#e9f0ff,#ffffff);}
  .media img{width:100%; height:100%; object-fit:cover; display:block;}
  .content{padding-right:6px;}
  .brand{display:flex; gap:8px; align-items:center; margin-bottom:6px;}
  .brand .logo{width:42px; height:42px; border-radius:8px; background:var(--accent); display:flex; align-items:center; justify-content:center; color:white; font-weight:700;}
  h1{margin:0; font-size:18px; color:#0f1724;}
  p.desc{margin:8px 0 14px; color:var(--muted); line-height:1.4;}
  .cta{display:inline-flex; gap:10px; align-items:center; background:var(--accent); color:white; padding:10px 14px; border-radius:8px; text-decoration:none; font-weight:600; box-shadow: 0 6px 16px rgba(11,118,239,0.14);}
  .meta{font-size:12px; color:var(--muted);}
  .footer{grid-column:1 / -1; display:flex; justify-content:space-between; align-items:center; margin-top:8px; padding-top:6px; border-top:1px dashed #eef2ff;}
  .small{font-size:12px;color:#9aa2b6;}
  @media (max-width:720px){
    .ad-wrap{grid-template-columns:1fr; padding:12px;}
    .media{height:220px;}
  }
</style>
</head>
<body>

<article class="ad-wrap" id="ad">
  <div class="media" id="media">
    <img alt="Ad creative" id="adImg" src="" />
  </div>

  <div class="content">
    <div class="brand">
      <div class="logo" id="adLogo">AD</div>
      <div>
        <div class="meta" id="adSource">مصدر الإعلان</div>
        <h1 id="adTitle">عنوان الإعلان</h1>
      </div>
    </div>

    <p class="desc" id="adDesc">وصف قصير للإعلان يظهر هنا. سيتم ملؤه تلقائياً من مصدر مجاني.</p>

    <a id="adCta" class="cta" href="#" target="_blank" rel="noopener noreferrer">
      زيارة الإعلان
      <svg width="14" height="14" viewBox="0 0 24 24" style="opacity:.9;margin-right:6px"><path fill="currentColor" d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3z"></path></svg>
    </a>

    <div style="height:8px"></div>
    <div class="meta small" id="adInfo">جارٍ التحميل…</div>
  </div>

  <div class="footer">
    <div class="small">إعلان تجريبي — مصدر مجاني</div>
    <div class="small">نُقِرت: <span id="clicks">0</span></div>
  </div>
</article>

<script>
/*
  PoC: fetch an "ad creative" from a free public JSON API (jsonplaceholder.typicode.com/photos).
  - This is NOT a real ad network; it's a safe free source for images/text to simulate ads.
  - You can swap the fetch URL to any other free JSON image provider.
*/

const adImg = document.getElementById('adImg');
const adTitle = document.getElementById('adTitle');
const adDesc = document.getElementById('adDesc');
const adCta = document.getElementById('adCta');
const adSource = document.getElementById('adSource');
const adInfo = document.getElementById('adInfo');
const adLogo = document.getElementById('adLogo');
const clicksSpan = document.getElementById('clicks');
let clicks = 0;

// Helper: pick random integer in [min, max]
const rnd = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

// Load a random "creative" from jsonplaceholder (free public test API)
async function loadAd() {
  try {
    adInfo.textContent = 'جلب الإعلان من مصدر مجاني…';
    // jsonplaceholder has 5000 photos; pick a random id to simulate variety
    const id = rnd(1, 5000);
    const res = await fetch('https://jsonplaceholder.typicode.com/photos/' + id);
    if (!res.ok) throw new Error('شبكة: ' + res.status);
    const data = await res.json();
    // data: { albumId, id, title, url, thumbnailUrl }
    // populate ad UI
    adImg.src = data.url;
    adImg.alt = data.title;
    adTitle.textContent = data.title.length > 60 ? data.title.slice(0,60) + '…' : data.title;
    adDesc.textContent = 'عرض توضيحي لصورة إعلانية من مصدر مجاني (jsonplaceholder).';
    // CTA: link to the image page (safe). In a real ad you'd link to advertiser.
    adCta.href = data.url;
    adSource.textContent = 'jsonplaceholder.typicode.com';
    adLogo.textContent = (data.albumId || 'AD').toString().slice(0,3).toUpperCase();
    adInfo.textContent = 'معرّف الإعلان: ' + data.id + ' • صورة بحجم تجريبي';
  } catch (err) {
    console.error('خطأ عند جلب الإعلان:', err);
    adInfo.textContent = 'فشل في جلب الإعلان؛ تحقق من الاتصال.';
    adImg.src = '';
    adTitle.textContent = 'إعلان غير متاح';
    adDesc.textContent = 'تعذر جلب محتوى الإعلان التجريبي.';
    adCta.removeAttribute('href');
  }
}

// click tracking (local only — logs plus counter)
adCta.addEventListener('click', function (ev) {
  clicks++;
  clicksSpan.textContent = clicks;
  console.log('Ad clicked — time:', new Date().toISOString(), 'href:', adCta.href);
  // for demonstration, also postMessage to parent (if in iframe)
  if (window.parent && window.parent !== window) {
    window.parent.postMessage({event:'ad_click', href: adCta.href, time: Date.now()}, '*');
  }
});

// Allow refresh by double-clicking ad image
adImg.addEventListener('dblclick', () => {
  adInfo.textContent = 'تحديث الإعلان...';
  loadAd();
});

// Initial load
loadAd();
</script>
</body>
</html>
